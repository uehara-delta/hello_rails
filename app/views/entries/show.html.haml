%h1
  = @entry.title
  = link_to edit_blog_entry_path(@blog, @entry), id: "entry-edit-link", class: "m-2 btn btn-sm btn-secondary" do
    = icon 'fas', 'edit'
    Edit

%p
  = @entry.body

.d-flex.flex-row.mt-2
  = link_to 'Back', @blog, class: "btn btn-link"

.mt-2
  %h3 Listing comments

  %table.table
    %tbody
      - @entry.comments.each do |comment|
        %tr{ id: "comment-row-#{comment.id}" }
          - if comment.status == "approved"
            %td= comment.body
            %td
          - else
            %td (承認待ち)
            %td= link_to 'Approve', approve_blog_entry_comment_path(@blog, @entry, comment), method: :put
          %td= link_to 'Destroy', blog_entry_comment_path(@blog, @entry, comment), method: :delete, data: { confirm: 'Are you sure?' }

  .card
    .card-body
      %h4.card-title New comment
      = form_with(model: [@blog, @entry, @new_comment], local: true) do |form|
        .m-3
          - if @new_comment.errors.any?
            #error_explanation.alert.alert-danger
              %h2= "#{pluralize(@new_comment.errors.count, "error")} prohibited this comment from begin saved:"
              %ul
                - @new_comment.errors.full_messages.each do |message|
                  %li= message

        .form-group
          = form.label :body
          = form.text_area :body, class: "form-control"
        .actions
          = form.submit "Save", class: "btn btn-secondary"
